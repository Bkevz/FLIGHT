Airline Name Retrieval Test Results - 2025-06-11 10:15:58.797561
============================================================

1. Testing Fallback Airline Mapping:
  ✓ EK -> Emirates (expected: Emirates)
  ✓ QR -> Qatar Airways (expected: Qatar Airways)
  ✓ SQ -> Singapore Airlines (expected: Singapore Airlines)
  ✓ TK -> Turkish Airlines (expected: Turkish Airlines)
  ✓ LH -> Lufthansa (expected: Lufthansa)
  ✓ AF -> Air France (expected: Air France)
  ✓ BA -> British Airways (expected: British Airways)
  ✓ AA -> American Airlines (expected: American Airlines)

2. Testing Edge Cases:
  ✓ 'None' -> 'Unknown Airline' (expected: 'Unknown Airline')
  ✓ '' -> 'Unknown Airline' (expected: 'Unknown Airline')
  ✓ '  ' -> 'Unknown Airline' (expected: 'Unknown Airline')
  ✓ 'ek' -> 'Emirates' (expected: 'Emirates')
  ✓ '  EK  ' -> 'Emirates' (expected: 'Emirates')
  ✓ 'UNKNOWN' -> 'Airline UNKNOWN' (expected: 'Airline UNKNOWN')
  ✓ '123' -> 'Unknown Airline' (expected: 'Unknown Airline')

3. Testing Reference Data Priority:
  ✓ EK -> Emirates Custom Name (Should use reference data over fallback)
  ✓ QR -> Qatar Airways Custom (Should use reference data over fallback)
  ✓ XX -> Test Airline (Should use reference data for unknown codes)
  ✓ SQ -> Singapore Airlines (Should fallback when not in reference data)

4. Testing Reference Data Extraction:
  Extracted airlines: {'EK': 'Emirates', 'QR': 'Qatar Airways'}
  Default airline: {'code': 'EK', 'name': 'Emirates'}
  ✓ Correctly extracted EK: Emirates
  ✓ Correctly extracted QR: Qatar Airways
  ✓ Default airline correctly set

5. Integration Test - Using Extracted Reference Data:
  ✓ EK -> Emirates (Should use extracted data)
  ✓ QR -> Qatar Airways (Should use extracted data)
  ✓ SQ -> Singapore Airlines (Should fallback to known codes)
  ✓ ZZ -> Airline ZZ (Should format unknown codes)

============================================================
SUMMARY:
- Airline name retrieval supports multiple data sources
- Priority: Reference data > Segment data > Flight data > Known codes > Formatted fallback
- Edge cases are handled gracefully
- Reference data extraction works correctly
- Integration between extraction and retrieval functions works